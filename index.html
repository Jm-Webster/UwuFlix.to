<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Uwu Flix</title>
<style>
body {margin:0;font-family:Arial,sans-serif;background:#0d0d0d;color:#fff;}
header{display:flex;align-items:center;padding:10px 20px;background:#111;}
header img{height:50px;cursor:pointer;}
header h1{margin-left:15px;font-size:2rem;color:#ff3f81;}
.back-btn{margin-left:auto;padding:8px 15px;background:#ff3f81;color:#fff;border:none;border-radius:8px;cursor:pointer;}
.search-bar{margin-left:20px;padding:6px 10px;border-radius:5px;border:none;width:200px;}
.homepage-banner{width:100%;max-height:300px;object-fit:cover;animation:fadeIn 2s ease-in;}
@keyframes fadeIn{from{opacity:0}to{opacity:1}}
.anime-tabs{display:flex;justify-content:center;flex-wrap:wrap;margin:30px 20px;gap:30px;}
.anime-card{width:200px;cursor:pointer;overflow:hidden;border-radius:12px;background:#1a1a1a;text-align:center;transition:transform 0.3s, box-shadow 0.3s;}
.anime-card img{width:100%;height:250px;object-fit:cover;display:block;}
.anime-card:hover{transform:scale(1.05);box-shadow:0 0 20px #ff3f81;}
.anime-card h3{margin:10px 0;color:#ff3f81;}
.video-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(250px,1fr));gap:20px;padding:20px;}
.video-card{background:#1a1a1a;border-radius:12px;overflow:hidden;cursor:pointer;transition:transform 0.3s, box-shadow 0.3s;}
.video-card img{width:100%;display:block;}
.video-card:hover{transform:scale(1.05);box-shadow:0 0 20px #ff3f81;}
.video-info{padding:8px;text-align:center;}
.video-info h3{margin:5px 0;font-size:1rem;color:#ff3f81;}
#fullViewPage{display:none;padding:20px;}
#fullViewPage video{display:block;width:100%;max-width:800px;height:450px;background:#000;border-radius:10px;margin-bottom:10px;}
.comments{margin-top:15px;}
.comments h3{color:#ff3f81;}
.comment{background:#0d0d0d;padding:10px;border-radius:8px;margin-bottom:10px;}
.comment input,.comment textarea{width:100%;padding:8px;margin-bottom:5px;border-radius:5px;border:none;background:#222;color:#fff;}
.comment button{background:#ff3f81;border:none;color:#fff;padding:8px 12px;border-radius:5px;cursor:pointer;}
.hidden{display:none;}
footer{padding:15px;text-align:center;background:#111;color:#ff3f81;margin-top:20px;}
</style>
</head>
<body>

<header>
  <img src="Thumbnails/logo.png" alt="Logo" onclick="showHome()">
  <h1>Uwu Flix</h1>
  <input type="text" id="homepageSearch" class="search-bar" placeholder="Search anime..." onkeyup="searchHome()">
  <button class="back-btn hidden" id="backBtn" onclick="goBack()">Back</button>
</header>

<!-- Homepage -->
<div id="homePage">
  <img src="Thumbnails/banner.png" alt="Banner" class="homepage-banner">

  <div class="anime-tabs" id="animeTabs">
    <div class="anime-card" data-title="Naruto" onclick="showAnime('naruto')">
      <img src="Thumbnails/naruto_tab.png" alt="Naruto">
      <h3>Naruto</h3>
    </div>
    <div class="anime-card" data-title="One Piece" onclick="showAnime('onepiece')">
      <img src="Thumbnails/onepiece_tab.png" alt="One Piece">
      <h3>One Piece</h3>
    </div>
  </div>
</div>

<!-- Anime Page -->
<div id="animePage" class="hidden">
  <input type="text" id="searchInput" class="search-bar" placeholder="Search videos..." onkeyup="searchVideos()">
  <div class="video-grid" id="videoGrid"></div>
</div>

<!-- Full View Page -->
<div id="fullViewPage" class="hidden">
  <h2 id="fullTitle"></h2>
  <video id="fullVideo" controls></video>
  <div class="comments">
    <h3>Comments</h3>
    <div id="commentList">
      <div class="comment"><strong>User1:</strong> Amazing fight!</div>
      <div class="comment"><strong>User2:</strong> Epic moment!</div>
    </div>
    <div class="comment">
      <input type="text" id="commentName" placeholder="Your name">
      <textarea id="commentText" placeholder="Add a comment"></textarea>
      <button onclick="addComment()">Post Comment</button>
    </div>
  </div>
</div>

<footer>
  &copy; 2025 Uwu Flix. All Rights Reserved.
</footer>

<script>
// Video data with thumbnail poster
const animeData = {
  naruto: [
    {video:'Videos/vid1.mp4', thumb:'Thumbnails/thumb1.png', title:'Madara Vs Shinobi Alliance'},
    {video:'Videos/vid2.mp4', thumb:'Thumbnails/thumb2.png', title:'Might Guy Vs Madara'},
    {video:'Videos/vid3.mp4', thumb:'Thumbnails/thumb3.png', title:'Kakashi Vs Obito'}
  ],
  onepiece: [
    {video:'Videos/vid4.mp4', thumb:'Thumbnails/thumb4.png', title:'Roger Pirates Vs White Beard'},
    {video:'Videos/vid5.mp4', thumb:'Thumbnails/thumb5.png', title:'Garp Saves Koby With Galaxy Impact'},
    {video:'Videos/vid6.mp4', thumb:'Thumbnails/thumb6.png', title:'Gear 5 Luffy Vs Kaido'}
  ]
};

let currentVideos = [];
let currentAnime = '';
let previousPage = 'home'; // track for back button

// Show anime highlights
function showAnime(anime){
  currentAnime = anime;
  previousPage = 'anime';
  document.getElementById('homePage').classList.add('hidden');
  document.getElementById('animePage').classList.remove('hidden');
  document.getElementById('fullViewPage').classList.add('hidden');
  document.getElementById('backBtn').classList.remove('hidden');

  currentVideos = animeData[anime];
  renderVideoGrid(currentVideos);
}

// Render video grid
function renderVideoGrid(videos){
  const grid = document.getElementById('videoGrid');
  grid.innerHTML = '';
  videos.forEach(v => {
    const card = document.createElement('div');
    card.className='video-card';
    card.innerHTML=`<img src="${v.thumb}" alt="${v.title}"><div class="video-info"><h3>${v.title}</h3></div>`;
    card.onclick = function(){ openFullView(v.video, v.title, v.thumb); };
    grid.appendChild(card);
  });
}

// Full view page with poster fix
function openFullView(videoSrc, title, poster){
  previousPage = 'anime';
  const fullView = document.getElementById('fullViewPage');

  // Show container first
  fullView.classList.remove('hidden');
  document.getElementById('animePage').classList.add('hidden');
  document.getElementById('homePage').classList.add('hidden');

  const video = document.getElementById('fullVideo');
  video.pause();
  video.currentTime = 0;
  video.src = videoSrc;
  video.poster = poster;   // set thumbnail as poster
  video.load();            // reload video
  video.play().catch(err => console.log(err));

  document.getElementById('fullTitle').innerText = title;
}

// Back button
function goBack(){
  if(previousPage === 'home'){
    showHome();
  } else if(previousPage === 'anime'){
    showAnime(currentAnime);
  }
}

// Go back to homepage
function showHome(){
  previousPage = 'home';
  document.getElementById('homePage').classList.remove('hidden');
  document.getElementById('animePage').classList.add('hidden');
  document.getElementById('fullViewPage').classList.add('hidden');
  document.getElementById('backBtn').classList.add('hidden');
  document.getElementById('searchInput').value = '';
  document.getElementById('homepageSearch').value = '';
  filterHomeTabs('');
}

// Add static comment
function addComment(){
  const name = document.getElementById('commentName').value.trim();
  const text = document.getElementById('commentText').value.trim();
  if(name && text){
    const div = document.createElement('div');
    div.className='comment';
    div.innerHTML=`<strong>${name}:</strong> ${text}`;
    document.getElementById('commentList').appendChild(div);
    document.getElementById('commentName').value='';
    document.getElementById('commentText').value='';
  }
}

// Search videos in anime page
function searchVideos(){
  const input = document.getElementById('searchInput').value.toLowerCase();
  const filtered = currentVideos.filter(v => v.title.toLowerCase().includes(input));
  renderVideoGrid(filtered);
}

// Search homepage anime tabs
function searchHome(){
  const input = document.getElementById('homepageSearch').value.toLowerCase();
  filterHomeTabs(input);
}

function filterHomeTabs(query){
  const tabs = document.querySelectorAll('#animeTabs .anime-card');
  tabs.forEach(tab => {
    const title = tab.getAttribute('data-title').toLowerCase();
    tab.style.display = title.includes(query) ? 'block' : 'none';
  });
}
</script>

</body>
</html>
